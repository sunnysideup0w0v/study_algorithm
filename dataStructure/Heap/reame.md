# 힙(Heap)

## 힙의 정의 및 특징

완전 이진트리 형태의 자료구조로, 부모노드와 서브트리간 값의 대소관계가 성립된다.
여러 개의 값 중 최댓값 혹은 최솟값을 찾아내는데에 특화되어있으며 루트노드의 값으로 어떤 값을 사용하느냐에 따라 최소힙과 최대힙으로 구분된다.
완전 이진트리는 중복값을 허용하지 않으나, 힙의 경우 중복값을 허용한다는 특징이 있다.

## 힙의 구분

### 최소힙(Min Heap)

루트 노드(부모 노드)의 키 값이 자식 노드보다 작거나 같은 값을 가지는 힙의 구조이다.

### 최대힙(Max Heap)

루트 노드(부모 노드)의 키 값이 자식 노드보다 크거나 같은 값을 가지는 힙의 구조이다.

## 힙의 구현 개념

### 삽입

힙에서 데이터를 삽입할 때에는 완전 이진트리의 특성에 맞춰 위에서부터 아래로, 왼쪽에서부터 오른쪽으로 값을 채워나가야 한다.
데이터(노드)를 저장할 위치를 찾는 것은 컴퓨터의 입장에서 쉽지 않기 때문에 마지막에 삽입된 데이터의 위치를 저장하여, 해당 값을 기반으로 삽입할 위치를 계산한다.
(매번 경로를 탐색하는 것은 비효율적이기 때문에 위와 같은 방식이 고안되었다!)

1. 삽입 후 부모 노드와 삽입된 노드의 데이터 값을 비교하여 힙 조건을 위반하는지 확인
2. 힙 조건을 위반할 경우 부모 노드와 자리를 교체한다
3. 교체 후 또 다시 부모 노드와 데이터 값을 비교하며 1, 2의 과정을 반복한다.

### 제거

우선순위가 가장 높은 노드부터 Out되기 때문에 해당 특성을 고려하여 제거를 구현해야 한다.
제거 자체는 단순하지만, 제거하는 과정 중에 마지막으로 삽입된 노드의 위치가 지워지기 때문에 마지막으로 삽입된 노드의 위치를 마지막 "이전"에 삽입된 노드의 위치로 변경해주어야 한다.
마찬가지로 마지막 이전에 삽입된 노드의 위치를 찾는 것은 삽입될 위치를 찾는 것과 비슷하여 조금 복잡하다.

1. 우선 순위가 가장 높은 노드, 즉 루트 노드를 우선적으로 제거(Out)한다.
2. 마지막에 삽입된 노드를 루트 노드의 위치로 가지고 오고, 두 자식 노드와 비교하여 우선순위에 맞게 위치를 변경한다.
3. 노드가 적절한 위치를 찾을 때 까지 자식 노드와 비교하여 위치를 변경한다.

## 시간 복잡도

삽입과 제거 모두 `O(log n)`의 시간 복잡도를 가져 매우 효율적으로 데이터를 탐색할 수 있다.
