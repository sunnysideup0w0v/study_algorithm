# AVL 트리

## AVL 트리의 정의와 특징

### 정의

AVL 트리는 이진 탐색 트리가 가질 수 있는 단점을 보완하여 고안해낸 자가 균형 이진 탐색 트리로, 탐색의 효율성을 위해 데이터의 삽입/제거를 진행하더라도 **균형잡힌 트리**가 될 수 있도록 하는 자료구조이다.

### 특징과 Balance Factor

AVL 트리는 균형이 무너졌는지에 대해 판단할 때 Balance Factor라는 것을 활요하는데, `BF(K) = K의 왼쪽 서브트리의 높이 - K의 오른쪽 서브트리의 높이`의 공식을 가져간다.
AVL 트리에서는 모든 노트의 BF가 -1, 0, 1 중 하나여야 하고, 이를 벗어났을 때 균형이 깨졌다고(무너졌다고) 판단한다.
균형을 맞추기 위해 트리를 다시 그리는 등의 방식은 사용하지 않는 대신 **회전**을 사용해 트리의 균형을 맞춘다.
검색, 삽입, 삭제는 모두 평균과 최악의 경우 O(log n)의 성능을 가진다.

## AVL 트리의 회전

회전의 명칭에 있는 각 방향의 이름은 "회전 방향"이 중심이 되는 것이 아니라 불균형의 원인에 대해 설명한다.
ex) LL 회전에서 첫 번째 Left는 불균형이 있는 노드의 왼쪽 자식에서 문제가 발생함을, 두 번째 Left는 그 왼쪽 자식의 왼쪽 자식에서 추가 삽입 혹은 삭제가 일어나 불균형이 심화되었음을 나타낸다.

### 데이터 삽입의 경우

**LL 회전 (Left Left Rotation)**
새로운 노드가 왼쪽 자식의 왼쪽 서브트리에 삽입되어 불균형한 트리가 되었을 경우 사용됩니다. 오른쪽으로 한 번 회전하여 균형을 맞춰낸다.

**RR 회전 (Right Right Rotation)**
새로운 노드가 오른쪽 자식의 오른쪽 서브트리에 삽입되어 불균형한 트리가 되었을 경우 사용됩니다. 왼쪽으로 한 번 회전하여 균형을 맞춰냅니다.

**LR 회전 (Left Right Rotation)**

새로운 노드가 왼쪽 자식의 오른쪽 서브트리에 삽입되어 불균형이 발생한 경우 사용됩니다. 왼쪽으로 한 번 회전 후, 오른쪽으로 한 번 회전하여 균형을 맞춥니다.

**RL 회전 (Right Left Rotation)**

새로운 노드가 오른쪽 자식의 왼쪽 서브트리에 삽입되어 불균형이 발생한 경우 사용됩니다. 오른쪽으로 한 번 회전 후, 오른쪽으로 한 번 회전하여 균형을 맞춥니다.

### 데이터 삭제의 경우

**LL 회전(Left Left Rotation)**
노드 삭제 후, 특정 노드의 오른쪽 서브 트리의 높이가 왼쪽 서브트리보다 더 커져 불균형이 발생한 경우 사용됩니다. 기준이 되는 노드를 기준으로 왼쪽으로 회전하여 균형을 맞춰냅니다.

**RR 회전(Right Right Rotation)**
노드 삭제 후, 특정 노드의 왼쪽 서브트리의 높이가 오른쪽 서브트리보다 더 커져 불균형이 발생한 경우 사용됩니다. 기준이 되는 노드를 기준으로 오른쪽으로 회전하여 균형을 맞춰냅니다.

**LR 회전(Left Right Rotation)**
노드 삭제 후, 특정 노드의 왼쪽 자식의 오른쪽 서브트리가 더 커져 불균형이 발생한 경우 사용됩니다. 특정 노드의 왼쪽 자식 노드를 기준으로 왼쪽으로 회전한 후, 특정 노드를 기준으로 오른쪽으로 회전하여 균형을 맞춰냅니다.

**RL 회전(Right Left Rotation)**
노드 삭제 후, 특정 노드의 오른쪽 자식의 왼쪽 서브트리의 높이가 왼쪽 서브트리보다 더 커져 불균형이 발생한 경우 사용됩니다. 특정 노드의 오른쪽 자식 노드를 기준으로 오른쪽으로 회전한 후, 특정 노드를 기준으로 왼쪽으로 회전하여 균형을 맞춰냅니다.
